function Note(t,e,a,n,o){this.id=t,this.title=e,this.text=a,this.setDate=new Date(n),this.createDate=new Date(o)}var todoApp=angular.module("todoApp",["routingApp","notesApp","designApp"]),routingApp=angular.module("routingApp",["ui.router"]);routingApp.run(function(t,e){e.$state=t}),routingApp.config(function(t,e){e.otherwise("/home"),t.state("home",{url:"/home",templateUrl:"/html-part/headPage.html"}).state("createNote",{url:"/createNote",templateUrl:"/html-part/createPage.html"}).state("update",{url:"/update",templateUrl:"/html-part/updatePage.html"}).state("help",{url:"/help",templateUrl:"/html-part/headPage.html.html"}).state("delete",{url:"/delete",templateUrl:"/html-part/deletePage.html"}).state("reminder",{url:"/about",templateUrl:"/html-part/reminderPage.html"})}),angular.module("designApp",["ngMaterial"]).config(function(t){t.theme("default").primaryPalette("lime")}),angular.module("designApp").controller("sidenavCtrl",function(t,e,a){function n(t){return function(){a(t).toggle()}}t.toggleLeft=n("left"),t.toggleRight=n("right");var o="./../../../../images/notepadCreate.png";t.todos=[{icon:o,text:"Календарь"},{icon:o,text:"Архив"},{icon:o,text:"Поиск"},{icon:o,text:"Тема"},{icon:o,text:"Поддержка"}]});var arrayH=[],dataBase={},failure=function(){alert("Error calling MyPlugin")},errCallback=function(){alert("Error in DataBase!")};openDB=function(){dataBase=window.openDatabase("dbNotes","1.0","DataBase of Notes",5242880),dataBase||alert("Failed to connect to database."),dataBase.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS dbNotes (ID INTEGER PRIMARY KEY ASC, title TEXT, text TEXT, set_date DATE, create_date DATE)",[],function(){},errCallback),console.log("create table ")})},selectWrite=function(){dataBase.transaction(function(t){t.executeSql("SELECT * FROM dbNotes",[],function(t,e){for(var a=0;a<e.rows.length;a++)arrayH.push(new Note(e.rows.item(a).ID,e.rows.item(a).title,e.rows.item(a).text,e.rows.item(a).set_date));console.log("length arrayH "+arrayH.length),console.log(e.rows.length),loadNote()},errCallback)})},init=function(){openDB(),selectWrite()};var notesApp=angular.module("notesApp",["ngMaterial"]);notesApp.controller("notesAddController",function(t){t.addNote=function(e,a,n){if(null==e){if(a.length>=15)var o=a.substring(0,15)+"...";else var o=a.substring(0,a.length);e=o}dataBase.transaction(function(t){t.executeSql("INSERT INTO dbNotes (title, text, set_date, create_date) VALUES (?,?,?,?)",[e,a,n,new Date])});var r=t.array.length;t.array.push(new Note(r+1,e,a,n,new Date)),t.data.typeButton="headPage",t.addToHistory("headPage")},t.deleteNote=function(t){dataBase.transaction(function(e){e.executeSql("DELETE FROM dbNotes WHERE ID = ?",[t])})},t.deleteAllNote=function(){dataBase.transaction(function(t){t.executeSql("DELETE FROM dbNotes")})}}),notesApp.controller("notesController",function(t){t.array=[],t.sortParamArray="setDate",t.data={},t.setFile=function(){return"Create"==t.data.typeButton?"html-part/createPage.html":"Update"==t.data.typeButton?"html-part/updatePage.html":"Delete"==t.data.typeButton?"html-part/checkNotes.html":"Reminder"==t.data.typeButton?"html-part/reminderPage.html":"headPage"==t.data.typeButton?"html-part/headPage.html":"headPage.html"},t.setNotify=function(e,a,n,o){console.log("time = "+o);var r=new Date;r.valueOf()>o.valueOf()?window.plugins.toast.showLongBottom("Into the Future :)"):(console.log("now = "+r),console.log("value _time = "+o.valueOf()+" today value = "+r.valueOf()),(void 0!==o||void 0!==o.getTime()||o.valueOf()>r.valueOf())&&(cordova.plugins.notification.local.schedule({id:e,title:a,text:n,sound:"file://sounds/message.mp3",at:o,led:"FF0000"}),t.updateNote(e,a,n,o),window.plugins.toast.showLongBottom("����������� �����������")))},onBackButtonDown=function(){t.$apply(function(){return"headPage"==t.data.typeButton?(navigator.notification.confirm("Press back again to exit",function(t){2!=t&&0!=t||navigator.app.exitApp()},"Exit App?",["No way","Exit"]),!1):void(t.data.typeButton=t.popHistory())})},t.onBackKeyDown=function(){t.data.typeButton=t.popHistory()},loadNote=function(){t.$apply(function(){t.array=arrayH.slice(0),console.log("Watch"),t.data.typeButton="headPage"})},t.arrayDeleted=[],t.arrayHisty=["headPage"],convertDate=function(t,e){if(null===t||void 0===t||isNaN(t))return"";var a=(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+", "+(t.getDate()<10?"0"+t.getDate():t.getDate())+e+(t.getUTCMonth()+1<10?"0"+(t.getUTCMonth()+1).toString():(t.getUTCMonth()+1).toString())+e+t.getFullYear();return a},t.viewDate=function(t){return convertDate(t,".")},t.current_date=t.viewDate(new Date);var e;t.updatePage=function(a,n,o,r){e=getNoteID(a),t.data.typeButton="Update",t.addToHistory("Update"),t.MYID=a,t.MYnote_title=n,t.MYnote_text=o,t.MYnote_set_date=r},t.reminderPage=function(a,n,o,r){e=getNoteID(a),t.data.typeButton="Reminder",t.addToHistory("Reminder"),t.MYID=a,t.MYnote_title=n,t.MYnote_text=o,t.MYnote_set_date=r},t.updateNote=function(a,n,o,r){var i=t.array.indexOf(e);if(null==n){if(o.length>=15)var l=o.substring(0,15)+"...";else var l=o.substring(0,o.length);n=l}dataBase.transaction(function(t){t.executeSql("UPDATE dbNotes SET title = ?, text = ?, set_date = ? WHERE ID = ?",[n,o,r,a])}),t.array.splice(i,1,new Note(a,n,o,r)),t.data.typeButton="headPage",t.addToHistory("headPage")};var a;getNoteID=function(e){for(i=0;i<t.array.length;i++)if(t.array[i].id===e)return a=i,t.array[i]},t.addToArray=function(e){var a=t.arrayDeleted.indexOf(e);a===-1?t.arrayDeleted.push(e):t.arrayDeleted.splice(a,1)},t.addToHistory=function(e){t.arrayHisty.push(e)},t.popHistory=function(){return 0===t.arrayHisty.length?"headPage":(t.arrayHisty.pop(),t.arrayHisty.pop())},t.deleteChekedNotes=function(){var e=0;for(e=0;e<t.arrayDeleted.length;e++){t.deleteNote(t.arrayDeleted[e]);var a=t.array.indexOf(getNoteID(t.arrayDeleted[e]));t.array.splice(a,1)}t.arrayDeleted.splice(0,t.arrayDeleted.length),t.data.typeButton="headPage",t.addToHistory("headPage")}}),angular.module("notesApp").filter("viewDate",function(){return function(t){var e=convertDate(t,".");if(e.length>0){var a=e.indexOf(","),n=new Date;if(Math.abs(t.valueOf()-n.valueOf())<864e5)return e.substring(0,a);var o=e.length;return e.substring(a+1,o)}}});