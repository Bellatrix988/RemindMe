function Note(e,t,a,n,o){this.id=e,this.title=t,this.text=a,this.setDate=new Date(n),this.createDate=new Date(o)}function selectTODO(){var e=[];return dataBase.transaction(function(t){t.executeSql("SELECT * FROM dbNotes",[],function(t,a){a.rows.forEach(function(t){e.push(new Note(t.ID,t.title,t.text,t.setDate))})})}),e}function insertTODO(e,t,a){dataBase.transaction(function(n){n.executeSql("INSERT INTO dbNotes (title, text, set_date, create_date) VALUES (?,?,?,?)",[e,t,a,new Date])})}function updateTODO(e,t,a,n){dataBase.transaction(function(o){o.executeSql("UPDATE dbNotes SET title = ?, text = ?, set_date = ? WHERE ID = ?",[e,t,a,n])})}function deleteTODO(e){dataBase.transaction(function(t){t.executeSql("DELETE FROM dbNotes WHERE ID = ?",[e])})}function deleteAllTODO(){dataBase.transaction(function(e){e.executeSql("DELETE FROM dbNotes")})}var todoApp=angular.module("todoApp",["routingApp","notesApp","designApp"]),routingApp=angular.module("routingApp",["ui.router"]);routingApp.config(function(e,t){t.otherwise("home"),e.state("home",{url:"/home",templateUrl:"../../../html-part/headPage.html"}).state("create",{url:"/create",templateUrl:"../../../html-part/createPage.html"}).state("update",{url:"/update",templateUrl:"../../../html-part/updatePage.html"}).state("help",{url:"/help",templateUrl:"../../../html-part/headPage.html"}).state("delete",{url:"/delete",templateUrl:"../../../html-part/checkNotes.html"}).state("reminder",{url:"/remider",templateUrl:"../../../html-part/reminderPage.html"})}),angular.module("designApp",["ngMaterial"]).config(function(e){e.theme("default").primaryPalette("green").accentPalette("grey")}),angular.module("designApp").controller("formCtrl",function(e){}),angular.module("designApp").controller("sidenavCtrl",function(e,t,a){function n(e){return function(){a(e).toggle()}}e.toggleLeft=n("left");var o="./../../../../images/notepadCreate.png";e.todos=[{icon:o,text:"Календарь"},{icon:o,text:"Архив"},{icon:o,text:"Поиск"},{icon:o,text:"Тема"},{icon:o,text:"Поддержка"}]}),angular.module("designApp").config(function(e){e.icon("share-arrow","../../../../images/notepadCreate.png",24).icon("upload","../../../../images/notepadCreate.png",24).icon("copy","../../../../images/notepadCreate.png",24).icon("print","../../../../images/notepadCreate.png",24).icon("hangout","../../../../images/notepadCreate.png",24).icon("mail","../../../../images/notepadCreate.png",24).icon("message","../../../../images/notepadCreate.png",24).icon("copy2","../../../../images/notepadCreate.png",24).icon("facebook","../../../../images/notepadCreate.png",24).icon("twitter","../../../../images/notepadCreate.png",24)}).controller("BottomSheetExample",function(e,t,a,n){e.alert="",e.showListBottomSheet=function(){e.alert="",a.show({templateUrl:"../../../../html-part/list_toolbar.html",controller:"ListBottomSheetCtrl"}).then(function(t){e.alert=t.name+" clicked!"})["catch"](function(e){})}}).controller("ListBottomSheetCtrl",function(e,t){e.items=[{name:"Share",icon:"share-arrow"},{name:"Upload",icon:"upload"},{name:"Copy",icon:"copy"},{name:"Print this page",icon:"print"}],e.listItemClick=function(a){var n=e.items[a];t.hide(n)}}).run(function(e){var t=["../../../../images/notepadCreate.png","../../../../images/notepadCreate.png","../../../../images/notepadCreate.png","../../../../images/notepadCreate.png","../../../../images/notepadCreate.png","../../../../images/notepadCreate.png","../../../../images/notepadCreate.png","../../../../images/notepadCreate.png","../../../../images/notepadCreate.png","../../../../images/notepadCreate.png","../../../../images/notepadCreate.png","../../../../images/notepadCreate.png"];angular.forEach(t,function(t){e(t)})});var arrayH=[],dataBase={},failure=function(){alert("Error calling MyPlugin")},errCallback=function(){alert("Error in DataBase!")};openDB=function(){dataBase=window.openDatabase("dbNotes","1.0","DataBase of Notes",5242880),dataBase||alert("Failed to connect to database."),dataBase.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS dbNotes (ID INTEGER PRIMARY KEY ASC, title TEXT, text TEXT, set_date DATE, create_date DATE)",[],function(){},errCallback),console.log("create table ")})},selectWrite=function(){dataBase.transaction(function(e){e.executeSql("SELECT * FROM dbNotes",[],function(e,t){for(var a=0;a<t.rows.length;a++)arrayH.push(new Note(t.rows.item(a).ID,t.rows.item(a).title,t.rows.item(a).text,t.rows.item(a).set_date));console.log("length arrayH "+arrayH.length),console.log(t.rows.length),loadNote()},errCallback)})},init=function(){openDB(),selectWrite()},angular.module("notesApp",[]),angular.module("notesApp").factory("baseDB",function(){return{select:function(){return selectTODO()},insert:function(e,t,a){e||(e=t.substring(0,15)+"..."),insertTODO(e,t,a)},update:function(e,t,a,n){updateTODO(e,t,a,n)},"delete":function(e){deleteTODO(e)}}}).controller("baseOperOfNotesCTRL",function(e){e.addNote=function(t,a,n){t||(t=a.substring(0,15)+"..."),insertTODO(t,a,n),e.array.push(new Note(e.array.length+1,t,a,n,new Date))},e.updateNote=function(t,a,n,o){var r=e.array.indexOf(current_note);if(null==a){if(n.length>=15)var i=n.substring(0,15)+"...";else var i=n.substring(0,n.length);a=i}updateTODO(a,n,o,t),e.array.splice(r,1,new Note(t,a,n,o)),e.data.typeButton="headPage",e.addToHistory("headPage")},e.deleteNote=function(e){deleteTODO(e)},e.deleteAllNote=function(){deleteAllTODO()}}).controller("mobileOper",function(e){onBackButtonDown=function(){e.$apply(function(){return"headPage"==e.data.typeButton?(navigator.notification.confirm("Press back again to exit",function(e){2!=e&&0!=e||navigator.app.exitApp()},"Exit App?",["No way","Exit"]),!1):void(e.data.typeButton=e.popHistory())})},e.setNotify=function(t,a,n,o){console.log("time = "+o);var r=new Date;r.valueOf()>o.valueOf()?window.plugins.toast.showLongBottom("Into the Future :)"):(console.log("now = "+r),console.log("value _time = "+o.valueOf()+" today value = "+r.valueOf()),(void 0!==o||void 0!==o.getTime()||o.valueOf()>r.valueOf())&&(cordova.plugins.notification.local.schedule({id:t,title:a,text:n,sound:"file://sounds/message.mp3",at:o,led:"FF0000"}),e.updateNote(t,a,n,o),window.plugins.toast.showLongBottom("����������� �����������")))}}).controller("notesController",["$scope","baseDB",function(e,t){e.array=[],e.sortParamArray="setDate",e.data={},e.addNote=function(a,n,o){t.insert(a,n,o),e.array.push(new Note(e.array.length+1,a,n,o))},e.initNotes=function(){e.array=t.select(),console.log("WOW"),e.$apply(function(){e.array=t.select(),console.log("WOW")})},e.setFile=function(){return"Create"==e.data.typeButton?"html-part/createPage.html":"Update"==e.data.typeButton?"html-part/updatePage.html":"Delete"==e.data.typeButton?"html-part/checkNotes.html":"Reminder"==e.data.typeButton?"html-part/reminderPage.html":("headPage"==e.data.typeButton,"html-part/headPage.html")},e.onBackKeyDown=function(){e.data.typeButton=e.popHistory()},loadNote=function(){e.$apply(function(){e.array=arrayH.slice(0),console.log("Watch"),e.data.typeButton="headPage"})},e.arrayDeleted=[],e.arrayHisty=["headPage"],e.viewDate=function(e){return null===e||isNaN(e)?"":new Date(e)},e.current_date=e.viewDate(new Date);var a;e.updatePage=function(t,n,o,r){a=getNoteID(t),e.data.typeButton="Update",e.addToHistory("Update"),e.MYID=t,e.MYnote_title=n,e.MYnote_text=o,e.MYnote_set_date=r},e.reminderPage=function(t,n,o,r){a=getNoteID(t),e.data.typeButton="Reminder",e.addToHistory("Reminder"),e.MYID=t,e.MYnote_title=n,e.MYnote_text=o,e.MYnote_set_date=r};var n;getNoteID=function(t){for(i=0;i<e.array.length;i++)if(e.array[i].id===t)return n=i,e.array[i]},e.addToArray=function(t){var a=e.arrayDeleted.indexOf(t);a===-1?e.arrayDeleted.push(t):e.arrayDeleted.splice(a,1)},e.addToHistory=function(t){e.arrayHisty.push(t)},e.popHistory=function(){return 0===e.arrayHisty.length?"headPage":(e.arrayHisty.pop(),e.arrayHisty.pop())},e.deleteChekedNotes=function(){e.arrayDeleted.forEach(function(a){t["delete"](a);var n=e.array.indexOf(getNoteID(a));e.array.splice(n,1)}),e.arrayDeleted.splice(0,e.arrayDeleted.length)}}]),angular.module("notesApp").filter("viewDate",function(){return function(e){var t=convertDate(e,".");if(t.length>0){var a=t.indexOf(","),n=new Date;if(Math.abs(e.valueOf()-n.valueOf())<864e5)return t.substring(0,a);var o=t.length;return t.substring(a+1,o)}}});