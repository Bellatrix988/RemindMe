function Note(t,e,a,n,o){this.id=t,this.title=e,this.text=a,this.setDate=new Date(n),this.createDate=new Date(o)}function selectTODO(){dataBase.transaction(function(t){t.executeSql("SELECT * FROM dbNotes",[],function(t,e){for(var a=0;a<e.rows.length;a++)arrayH.push(new Note(e.rows.item(a).ID,e.rows.item(a).title,e.rows.item(a).text,e.rows.item(a).set_date));console.log("selectTODO RES: ",res)},errCallback)})}function insertTODO(t,e,a){dataBase.transaction(function(n){n.executeSql("INSERT INTO dbNotes (title, text, set_date, create_date) VALUES (?,?,?,?)",[t,e,a,new Date])}),selectWrite()}function updateTODO(t,e,a,n){dataBase.transaction(function(o){o.executeSql("UPDATE dbNotes SET title = ?, text = ?, set_date = ? WHERE ID = ?",[t,e,a,n])}),selectWrite()}function deleteTODO(t){dataBase.transaction(function(e){e.executeSql("DELETE FROM dbNotes WHERE ID = ?",[t])}),selectWrite()}function deleteAllTODO(){dataBase.transaction(function(t){t.executeSql("DELETE FROM dbNotes")}),selectWrite()}var todoApp=angular.module("todoApp",["routingApp","notesApp","designApp"]),routingApp=angular.module("routingApp",["ui.router","notesApp"]);routingApp.config(function(t,e){routingApp.run(function(t,e){e.$state=t}),e.otherwise("home"),t.state("home",{url:"/home",templateUrl:"../../../html-part/headPage.html",controller:"notesController"}).state("create",{url:"/create",templateUrl:"../../../html-part/createPage.html"}).state("update",{url:"/update",templateUrl:"../../../html-part/updatePage.html"}).state("help",{url:"/help",templateUrl:"../../../html-part/headPage.html"}).state("delete",{url:"/delete",templateUrl:"../../../html-part/checkNotes.html"}).state("reminder",{url:"/remider",templateUrl:"../../../html-part/reminderPage.html"})}),angular.module("designApp",["ngMaterial","ngAnimate","ngAria","mdPickers"]).config(function(t){t.theme("default").primaryPalette("green").accentPalette("grey")}),angular.module("designApp").controller("formCtrl",function(t){}),angular.module("designApp").controller("reminderCtrl",["$scope","$mdpDatePicker","$mdpTimePicker",function(t,e,a){t.currentDate=new Date,this.showDatePicker=function(a){e(t.currentDate,{targetEvent:a}).then(function(e){t.currentDate=e})},this.filterDate=function(t){return moment(t).date()%2==0},this.showTimePicker=function(e){a(t.currentTime,{targetEvent:e}).then(function(e){t.currentTime=e})}}]),angular.module("designApp").controller("sidenavCtrl",function(t,e,a){function n(t){return function(){a(t).toggle()}}t.toggleLeft=n("left");var o="./../../../../images/notepadCreate.png";t.todos=[{icon:o,text:"Календарь"},{icon:o,text:"Архив"},{icon:o,text:"Поиск"},{icon:o,text:"Тема"},{icon:o,text:"Поддержка"}]}),angular.module("designApp").controller("BottomSheetExample",function(t,e,a,n){t.alert="",t.showListBottomSheet=function(){t.alert="",a.show({templateUrl:"../../../../html-part/list_toolbar.html",controller:"ListBottomSheetCtrl"}).then(function(e){t.alert=e.name+" clicked!"})["catch"](function(t){})}}).controller("ListBottomSheetCtrl",function(t,e){t.items=[{name:"Добавить напоминание",icon:"fa fa-clock-o",fucClick:"",src:"reminder"},{name:"Поставить метку",icon:"fa fa-tag",fucClick:"",src:"reminder"},{name:"Изменить цвет",icon:"fa fa-paint-brush",fucClick:"",src:"reminder"}],t.listItemClick=function(a){var n=t.items[a];e.hide(n)}});var arrayH=[],dataBase={},failure=function(){console.log("Error calling MyPlugin")},errCallback=function(){console.log("Error in DataBase!")};openDB=function(){dataBase=window.openDatabase("dbNotes","1.0","DataBase of Notes",5242880),dataBase||alert("Failed to connect to database."),dataBase.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS dbNotes (ID INTEGER PRIMARY KEY ASC, title TEXT, text TEXT, set_date DATE, create_date DATE)",[],function(){},errCallback),console.log("create table ")})},selectWrite=function(){arrayH=[],dataBase.transaction(function(t){t.executeSql("SELECT * FROM dbNotes",[],function(t,e){for(var a=0;a<e.rows.length;a++)arrayH.push(new Note(e.rows.item(a).ID,e.rows.item(a).title,e.rows.item(a).text,e.rows.item(a).set_date));loadNote()},errCallback)})},init=function(){openDB(),selectWrite()},angular.module("notesApp",[]),angular.module("notesApp").factory("baseDB",function(){return{select:function(){return selectTODO()},insert:function(t,e,a){t||(t=e.substring(0,15)+"..."),insertTODO(t,e,a)},update:function(t,e,a,n){updateTODO(t,e,a,n)},"delete":function(t){deleteTODO(t)}}}).factory("noteUP",function(){return{getNote:function(t,e,a,n){return new Note(n,t,e,a)}}}).controller("baseOperOfNotesCTRL",function(t){t.addNote=function(e,a,n){e||(e=a.substring(0,15)+"..."),insertTODO(e,a,n),t.array.push(new Note(t.array.length+1,e,a,n,new Date))},t.updateNote=function(e,a,n,o){var r=t.array.indexOf(current_note);if(null==a){if(n.length>=15)var i=n.substring(0,15)+"...";else var i=n.substring(0,n.length);a=i}updateTODO(a,n,o,e),t.array.splice(r,1,new Note(e,a,n,o)),t.data.typeButton="headPage",t.addToHistory("headPage")},t.deleteNote=function(t){deleteTODO(t)},t.deleteAllNote=function(){deleteAllTODO()}}).controller("mobileOper",function(t){onBackButtonDown=function(){t.$apply(function(){return"headPage"==t.data.typeButton?(navigator.notification.confirm("Press back again to exit",function(t){2!=t&&0!=t||navigator.app.exitApp()},"Exit App?",["No way","Exit"]),!1):void(t.data.typeButton=t.popHistory())})},t.setNotify=function(e,a,n,o){console.log("time = "+o);var r=new Date;r.valueOf()>o.valueOf()?window.plugins.toast.showLongBottom("Into the Future :)"):(console.log("now = "+r),console.log("value _time = "+o.valueOf()+" today value = "+r.valueOf()),(void 0!==o||void 0!==o.getTime()||o.valueOf()>r.valueOf())&&(cordova.plugins.notification.local.schedule({id:e,title:a,text:n,sound:"file://sounds/message.mp3",at:o,led:"FF0000"}),t.updateNote(e,a,n,o),window.plugins.toast.showLongBottom("����������� �����������")))}}).controller("notesController",["$scope","baseDB","noteUP",function(t,e,a){t.array=[],t.sortParamArray="setDate",t.data={},t.addNote=function(t,a,n){e.insert(t,a,n)},t.updateNote=function(n,o,r,i){t.note=a.getNote(n,o,r,i),e.update(n,o,r,i),t.array=e.select()},t.initNotes=function(){t.array=arrayH.slice(0)},t.setFile=function(){return"Create"==t.data.typeButton?"html-part/createPage.html":"Update"==t.data.typeButton?"html-part/updatePage.html":"Delete"==t.data.typeButton?"html-part/checkNotes.html":"Reminder"==t.data.typeButton?"html-part/reminderPage.html":("headPage"==t.data.typeButton,"html-part/headPage.html")},t.onBackKeyDown=function(){t.data.typeButton=t.popHistory()},loadNote=function(){t.$apply(function(){t.array=arrayH.slice(0)})},t.arrayDeleted=[],t.arrayHisty=["headPage"],t.viewDate=function(t){return null===t||isNaN(t)?"":new Date(t)},t.current_date=t.viewDate(new Date);var n;t.updatePage=function(e,a,o,r){n=getNoteID(e),t.data.typeButton="Update",t.addToHistory("Update"),t.MYID=e,t.MYnote_title=a,t.MYnote_text=o,t.MYnote_set_date=r},t.reminderPage=function(e,a,o,r){n=getNoteID(e),t.data.typeButton="Reminder",t.addToHistory("Reminder"),t.MYID=e,t.MYnote_title=a,t.MYnote_text=o,t.MYnote_set_date=r};var o;getNoteID=function(e){for(i=0;i<t.array.length;i++)if(t.array[i].id===e)return o=i,t.array[i]},t.addToArray=function(e){var a=t.arrayDeleted.indexOf(e);a===-1?t.arrayDeleted.push(e):t.arrayDeleted.splice(a,1)},t.addToHistory=function(e){t.arrayHisty.push(e)},t.popHistory=function(){return 0===t.arrayHisty.length?"headPage":(t.arrayHisty.pop(),t.arrayHisty.pop())},t.deleteChekedNotes=function(){t.arrayDeleted.forEach(function(a){e["delete"](a);var n=t.array.indexOf(getNoteID(a));t.array.splice(n,1)}),t.arrayDeleted.splice(0,t.arrayDeleted.length)}}]),angular.module("notesApp").filter("viewDate",function(){return function(t){var e=convertDate(t,".");if(e.length>0){var a=e.indexOf(","),n=new Date;if(Math.abs(t.valueOf()-n.valueOf())<864e5)return e.substring(0,a);var o=e.length;return e.substring(a+1,o)}}});