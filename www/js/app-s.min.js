function Note(t,e,n,a,o){this.id=t,this.title=e,this.text=n,this.setDate=new Date(a),this.createDate=new Date(o)}function insertTODO(t,e,n){dataBase.transaction(function(a){a.executeSql("INSERT INTO dbNotes (title, text, set_date, create_date) VALUES (?,?,?,?)",[t,e,n,new Date])}),selectWrite()}function updateTODO(t,e,n,a){dataBase.transaction(function(o){o.executeSql("UPDATE dbNotes SET title = ?, text = ?, set_date = ? WHERE ID = ?",[t,e,n,a])}),selectWrite()}function deleteTODO(t){dataBase.transaction(function(e){e.executeSql("DELETE FROM dbNotes WHERE ID = ?",[t])}),selectWrite()}function deleteAllTODO(){dataBase.transaction(function(t){t.executeSql("DELETE FROM dbNotes")}),selectWrite()}var todoApp=angular.module("todoApp",["routingApp","notesApp","designApp"]),routingApp=angular.module("routingApp",["ui.router"]);routingApp.controller("updateCtrl",function(t,e){e.note=t.note}),routingApp.config(function(t,e){e.otherwise("home"),t.state("home",{url:"/home",templateUrl:"../../../html-part/headPage.html"}).state("create",{url:"/create",templateUrl:"../../../html-part/createPage.html"}).state("update",{url:"/update",templateUrl:"../../../html-part/updatePage.html",controller:"updateCtrl",params:{note:Object}}).state("help",{url:"/help",templateUrl:"../../../html-part/headPage.html"}).state("delete",{url:"/delete",templateUrl:"../../../html-part/checkNotes.html"}).state("reminder",{url:"/remider",templateUrl:"../../../html-part/reminderPage.html"})}),angular.module("designApp",["ngMaterial","ngAnimate","ngAria","mdPickers"]).config(function(t){t.theme("default").primaryPalette("green").accentPalette("grey")}).controller("generalDesignCtrl",function(t){}),angular.module("designApp").controller("formCtrl",function(t){}),angular.module("designApp").controller("reminderCtrl",["$scope","$mdpDatePicker","$mdpTimePicker",function(t,e,n){t.currentDate=new Date,this.showDatePicker=function(n){e(t.currentDate,{targetEvent:n}).then(function(e){t.currentDate=e})},this.filterDate=function(t){return moment(t).date()%2==0},this.showTimePicker=function(e){n(t.currentTime,{targetEvent:e}).then(function(e){t.currentTime=e})}}]),angular.module("designApp").controller("sidenavCtrl",function(t,e,n){function a(t){return function(){n(t).toggle()}}t.toggleLeft=a("left");var o="./../../../../images/notepadCreate.png";t.todos=[{icon:o,text:"Календарь"},{icon:o,text:"Архив"},{icon:o,text:"Поиск"},{icon:o,text:"Тема"},{icon:o,text:"Поддержка"}]}),angular.module("designApp").controller("BottomSheetExample",function(t,e,n,a){t.alert="",t.showListBottomSheet=function(){t.alert="",n.show({templateUrl:"../../../../html-part/list_toolbar.html",controller:"ListBottomSheetCtrl"}).then(function(e){t.alert=e.name+" clicked!"})["catch"](function(t){})}}).controller("ListBottomSheetCtrl",function(t,e){t.items=[{name:"Добавить напоминание",icon:"fa fa-clock-o",fucClick:"",src:"reminder"},{name:"Поставить метку",icon:"fa fa-tag",fucClick:"",src:"reminder"},{name:"Изменить цвет",icon:"fa fa-paint-brush",fucClick:"",src:"reminder"}],t.listItemClick=function(n){var a=t.items[n];e.hide(a)}});var arrayH=[],dataBase={},failure=function(){console.log("Error calling MyPlugin")},errCallback=function(){console.log("Error in DataBase!")};openDB=function(){dataBase=window.openDatabase("dbNotes","1.0","DataBase of Notes",5242880),dataBase||alert("Failed to connect to database."),dataBase.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS dbNotes (ID INTEGER PRIMARY KEY ASC, title TEXT, text TEXT, set_date DATE, create_date DATE)",[],function(){},errCallback),console.log("create table ")})},selectWrite=function(){arrayH=[],dataBase.transaction(function(t){t.executeSql("SELECT * FROM dbNotes",[],function(t,e){for(var n=0;n<e.rows.length;n++)arrayH.push(new Note(e.rows.item(n).ID,e.rows.item(n).title,e.rows.item(n).text,e.rows.item(n).set_date));loadNote()},errCallback)})},init=function(){openDB(),selectWrite()},angular.module("notesApp",["routingApp"]),angular.module("notesApp").factory("baseDB",function(){return{insert:function(t,e,n){t||(t=e.substring(0,15)+"..."),insertTODO(t,e,n)},update:function(t,e,n,a){updateTODO(t,e,n,a)},"delete":function(t){deleteTODO(t)}}}).factory("noteUP",function(){return{getNote:function(t,e,n,a){return new Note(a,t,e,n)}}}).controller("mobileOper",function(t){onBackButtonDown=function(){t.$apply(function(){return"headPage"==t.data.typeButton?(navigator.notification.confirm("Press back again to exit",function(t){2!=t&&0!=t||navigator.app.exitApp()},"Exit App?",["No way","Exit"]),!1):void(t.data.typeButton=t.popHistory())})},t.setNotify=function(e,n,a,o){console.log("time = "+o);var r=new Date;r.valueOf()>o.valueOf()?window.plugins.toast.showLongBottom("Into the Future :)"):(console.log("now = "+r),console.log("value _time = "+o.valueOf()+" today value = "+r.valueOf()),(void 0!==o||void 0!==o.getTime()||o.valueOf()>r.valueOf())&&(cordova.plugins.notification.local.schedule({id:e,title:n,text:a,sound:"file://sounds/message.mp3",at:o,led:"FF0000"}),t.updateNote(e,n,a,o),window.plugins.toast.showLongBottom("����������� �����������")))}}).controller("notesController",["$scope","baseDB","noteUP",function(t,e,n){t.array=[],t.sortParamArray="setDate",t.data={},t.addNote=function(t,n,a){e.insert(t,n,a)},t.updateNote=function(t,n,a,o){e.update(t,n,a,o)},t.initNotes=function(){t.array=arrayH.slice(0)},loadNote=function(){t.$apply(function(){t.initNotes()})},t.arrayDeleted=[],t.addToArray=function(e){var n=t.arrayDeleted.indexOf(e);n===-1?t.arrayDeleted.push(e):t.arrayDeleted.splice(n,1)},t.removeNotes=function(){t.arrayDeleted.forEach(function(t){e["delete"](t)}),t.arrayDeleted=[]},t.viewDate=function(t){return null===t||isNaN(t)?"":new Date(t)},t.current_date=t.viewDate(new Date);var a;getNoteID=function(e){for(i=0;i<t.array.length;i++)if(t.array[i].id===e)return a=i,t.array[i]}}]),angular.module("notesApp").filter("viewDate",function(){return function(t){var e=convertDate(t,".");if(e.length>0){var n=e.indexOf(","),a=new Date;if(Math.abs(t.valueOf()-a.valueOf())<864e5)return e.substring(0,n);var o=e.length;return e.substring(n+1,o)}}});